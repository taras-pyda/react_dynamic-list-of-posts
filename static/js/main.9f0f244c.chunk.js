(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(5),c=n.n(s),a=n(2),o=n(1),r=n.n(o),i=(n(11),n(12),n(6)),u=n(4),l=n.n(u),d=function(){var e=Object(i.a)(l.a.mark((function e(t,n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://mate.academy/students-api","/").concat(t),n);case 2:return s=e.sent,e.abrupt("return",s.json());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=n(0),m=function(e){var t=e.changeUserId,n=e.changePostId,s=Object(o.useState)([]),c=Object(a.a)(s,2),r=c[0],i=c[1];Object(o.useEffect)((function(){d("users").then((function(e){return i(e)}))}),[]);return Object(j.jsxs)("label",{htmlFor:"userSelect",children:["Select a user: \xa0",Object(j.jsxs)("select",{id:"userSelect",className:"App__user-selector",onChange:function(e){var s=+e.target.value;t(s),n(0)},children:[Object(j.jsx)("option",{value:"0",children:"All users"}),r.map((function(e){var t=e.id,n=e.name;return Object(j.jsx)("option",{value:t,children:n},t)}))]})]})},b=(n(15),function(e){var t=e.selectedPostId,n=e.id,s=e.userId,c=e.body,a=e.onChangePostId;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{children:[Object(j.jsxs)("b",{children:["[User #",s,"]:"," "]}),c]}),Object(j.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(e){var t=e.currentTarget.textContent;a("Open"===t?n:0)},children:n===t?"Close":"Open"})]})}),O=r.a.memo((function(e){var t=e.selectedUserId,n=e.selectedPostId,s=e.onChangePostId,c=Object(o.useState)([]),r=Object(a.a)(c,2),i=r[0],u=r[1];return Object(o.useEffect)((function(){(function(e){var t=e>0?"posts?userId=".concat(e):"posts";return d(t)})(t).then((function(e){return u(e)}))}),[t]),Object(j.jsxs)("div",{className:"PostsList",children:[Object(j.jsx)("h2",{children:"Posts:"}),Object(j.jsx)("ul",{className:"PostsList__list",children:i.map((function(e){var t=e.id,c=e.userId,a=e.body;return Object(j.jsx)("li",{className:"PostsList__item",children:Object(j.jsx)(b,{selectedPostId:n,id:t,userId:c,body:a,onChangePostId:s})},t)}))})]})})),h=(n(16),function(e){return t="comments/".concat(e),d(t,{method:"DELETE"});var t}),f=function(e,t,n,s){return c={postId:e,name:t,email:n,body:s},d("comments",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(c)});var c},p=function(e){var t=e.id,n=e.body,s=e.postId,c=e.loadComments;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){h(t).then((function(){return c(s)}))},children:"X"}),Object(j.jsx)("p",{children:n})]})},x=function(e){var t=e.comments,n=e.loadComments,s=Object(o.useState)(!1),c=Object(a.a)(s,2),r=c[0],i=c[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{type:"button",className:"button",onClick:function(){i(!r)},children:"".concat(r?"Hide":"Show"," ").concat(t.length," comments")}),Object(j.jsx)("ul",{className:"PostDetails__list",children:r&&t.map((function(e){var t=e.id,s=e.postId,c=e.body;return Object(j.jsx)("li",{className:"PostDetails__list-item",children:Object(j.jsx)(p,{id:t,postId:s,body:c,loadComments:n})},t)}))})]})},v=(n(17),function(e){var t=e.postId,n=e.loadComments,s=Object(o.useState)(""),c=Object(a.a)(s,2),r=c[0],i=c[1],u=Object(o.useState)(""),l=Object(a.a)(u,2),d=l[0],m=l[1],b=Object(o.useState)(!0),O=Object(a.a)(b,2),h=O[0],p=O[1],x=Object(o.useState)(""),v=Object(a.a)(x,2),_=v[0],N=v[1],I=Object(o.useState)(!1),P=Object(a.a)(I,2),C=P[0],y=P[1],g=function(e){var t=e.target.value.trimLeft();switch(e.target.name){case"name":i(t);break;case"email":m(t),p(!0),p(/^((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www\.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!/\\\w]*))?)$/.test(t));break;case"body":N(t)}};return Object(o.useEffect)((function(){y(!!r&&!!d&&h&&!!_)}),[r,d,_]),Object(j.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),f(t,r,d,_).then((function(e){return n(e.postId)})),i(""),m(""),N("")},children:[Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("input",{type:"text",name:"name",value:r,placeholder:"Your name",className:"NewCommentForm__input",onChange:g})}),Object(j.jsxs)("div",{className:"form-field",children:[Object(j.jsx)("input",{type:"text",name:"email",value:d,placeholder:"Your email",className:"NewCommentForm__input",onChange:g}),!h&&Object(j.jsx)("p",{className:"NewCommentForm__error",children:"Please enter correct Email"})]}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("textarea",{name:"body",value:_,placeholder:"Type comment here",className:"NewCommentForm__input",onChange:g})}),Object(j.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",disabled:!C,children:"Add a comment"})]})}),_=r.a.memo((function(e){var t=e.selectedPostId,n=Object(o.useState)(null),s=Object(a.a)(n,2),c=s[0],r=s[1],i=Object(o.useState)([]),u=Object(a.a)(i,2),l=u[0],m=u[1],b=function(e){(function(e){return d("comments").then((function(t){return t.filter((function(t){return t.postId===e}))}))})(e).then((function(e){return m(e)}))};return Object(o.useEffect)((function(){var e;(e=t,d("posts/".concat(e))).then((function(e){return r(e)})),b(t)}),[t]),Object(j.jsxs)("div",{className:"PostDetails",children:[Object(j.jsx)("h2",{children:"Post details:"}),Object(j.jsx)("section",{className:"PostDetails__post",children:Object(j.jsx)("p",{children:null===c||void 0===c?void 0:c.body})}),Object(j.jsx)("section",{className:"PostDetails__comments",children:Object(j.jsx)(x,{comments:l,loadComments:b})}),Object(j.jsx)("section",{children:Object(j.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(j.jsx)(v,{postId:t,loadComments:b})})})]})})),N=function(){var e=Object(o.useState)(0),t=Object(a.a)(e,2),n=t[0],s=t[1],c=Object(o.useState)(0),r=Object(a.a)(c,2),i=r[0],u=r[1],l=function(e){u(e)};return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("header",{className:"App__header",children:Object(j.jsx)(m,{changeUserId:function(e){s(e)},changePostId:l})}),Object(j.jsxs)("main",{className:"App__main",children:[Object(j.jsx)("div",{className:"App__sidebar",children:Object(j.jsx)(O,{selectedUserId:n,selectedPostId:i,onChangePostId:l})}),0!==i&&Object(j.jsx)("div",{className:"App__content",children:Object(j.jsx)(_,{selectedPostId:i})})]})]})};c.a.render(Object(j.jsx)(N,{}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.9f0f244c.chunk.js.map